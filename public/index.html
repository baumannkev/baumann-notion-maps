<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Notion Maps</title>
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
  />
  <link rel="stylesheet" href="/style.css" />
  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
</head>
<body>
  <div id="app">
    <!-- Top bar (hidden in embed mode via script) -->
    <header class="topbar">
      <div class="logo">📍 Notion Maps</div>
      <div class="menu">
        <button id="menuBtn">☰</button>
        <div id="dropdown" class="dropdown">
          <a href="#">🗺️ My maps</a>
          <a href="#">👤 Account</a>
          <a href="#">🚪 Logout</a>
        </div>
      </div>
    </header>

    <div class="container">
      <!-- Main‐site sidebar -->
      <aside class="sidebar">
        <div id="mapListView">
          <h2>My maps</h2>
          <div id="mapList"></div>
        </div>
        <div id="mapEditView" style="display:none;">
          <a href="#" id="goBack">← Go back</a>
          <h3>Editing map</h3>

          <div class="form-group">
            <label>Select a database</label>
            <select id="dbSelect" disabled></select>
          </div>

          <div class="form-group">
            <label>Pick a name</label>
            <input type="text" id="mapName" />
          </div>

          <div class="form-group">
            <label>Unique map address</label>
            <div class="url-box">
              <input type="text" id="mapUrl" readonly />
              <button id="copyBtn">📋</button>
            </div>
          </div>

          <div class="form-group">
            <label>Locations count</label>
            <div id="locationCount">0</div>
          </div>

          <div class="form-group">
            <label>Select which column to use as marker color</label>
            <select id="markerColorSelect">
              <option value="">None</option>
            </select>
          </div>

          <div class="form-group">
            <label>Visible columns</label>
            <div id="visibleColumns"></div>
          </div>

          <div class="form-group">
            <button id="saveMap">Save map</button>
          </div>
        </div>
      </aside>

      <!-- Embed‐mode marker list sidebar (toggled via toolbar) -->
      <aside class="embedSidebar" style="display:none;">
        <h2>Map markers</h2>
        <div class="embed-subtitle">List of all the map markers</div>
        <div id="markerList"></div>
      </aside>

      <main class="map-panel">
        <!-- Toolbar for embed mode -->
        <div class="embedToolbar" style="display:none;">
          <button id="toggleListBtn" title="Toggle marker list">≡</button>
          <button title="Search">🔍</button>
          <button title="Settings">⚙️</button>
          <button title="Info">🗺️</button>
        </div>
        <div id="map"></div>
      </main>
    </div>
  </div>

  <script src="/script.js"></script>
</body>
</html>
